---
import Layout from "../layouts/Layout.astro";
import Nav from "../components/Nav.astro";
import Work from "../components/Work.astro";
import Writing from "../components/Writing.astro";
import { getCollection } from 'astro:content';

const works = await getCollection('work', ({ data: { isDraft } }) => !isDraft);
const writings = await getCollection('writing');
---
<Layout>
  <Nav />
  <div class="col-span-full relative grid grid-cols-8 gap-15 md:ml-[var(--nav-offset)] pb-[60px]">
    {works?.sort((a, b) => (a.data.order - b.data.order)).map(({ data: work }, index) => (
      <Work variant="row" {...work} index={index} />
    ))}
    {writings?.sort((a, b) => {
        const dateA: any = new Date(a.data.date);
        const dateB: any = new Date(b.data.date);
        return dateB - dateA;
      }).map((writing) => (
          <Writing
            title={writing.data.title}
            href={`/writing/${writing.slug}`}
            date={writing.data.date}
            preview={writing.data.preview}
          />
        )
      )}
  </div>
</Layout>

<style>
  #study-title {
    transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg);
    transform-style: preserve-3d;
    animation: spin 20s infinite linear 0s;
    z-index: 100;
  }

  #study-title span {
    position: absolute;
    background-color: green;
    color: white;
  }

  @keyframes spin {
    0% {
      transform: rotateX(37deg) rotateY(123deg) rotateZ(45deg);
    }
    50% {
      transform: rotateX(82deg) rotateY(275deg) rotateZ(19deg);
    }
    100% {
      transform: rotateX(14deg) rotateY(93deg) rotateZ(27deg);
    }
    /* 0% {
      transform: rotateX(10deg) rotateY(10deg);
    }
    50% {
      transform: rotateX(60deg) rotateY(360deg);
    }
    100% {
      transform: rotateX(10deg) rotateY(10deg);
    } */
  }
</style>