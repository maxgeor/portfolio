---
import RightArrowIcon from './icons/RightArrowIcon.astro';
import ChevronRightIcon from './icons/ChevronRightIcon.astro';
import UpRightArrowIcon from './icons/UpRightArrowIcon.astro';

export interface Props {
  title: string;
  description: string;
  image: string;
  roles: string[];
  year: string;
  slug: string;
  isComingSoon?: boolean;
  link?: {
    href: string;
    target?: '_blank' | '_self';
  };
  classes?: string;
}

const { 
  link, 
  title, 
  description, 
  image, 
  roles = [], 
  slug,
  year = '2023',
  isComingSoon = false,
  classes = '' 
} = Astro.props;
---

<a
  href={`/study/${slug}`}
  class={`
    relative gap-x-6 gap-y-2 col-span-full grid h-fit break-inside-avoid-column grid-cols-12 mt-auto
    ${classes} 
  `}
>
  <div class="col-span-full md:col-span-2 flex md:flex-col justify-between">
    <p>{title}</p>
    <p>{roles.join(', ')}</p>
  </div>
  <picture class={`
    relative h-auto col-span-full md:col-span-8 md:col-start-3
    ${!isComingSoon ? 'group-hover:brightness-[95%] transition ease-in-out' : ''}
  `}>
    <img
      src={image}
      alt={`Preview mockup of ${title}`}
      class='w-full h-full object-top select-none object-cover'
    />
  </picture>
  <div class="text-right col-span-full md:col-span-2 flex md:flex-col justify-between items-end">
    <p>{description}</p>
    <p>{year}</p>
  </div>
  <!-- <h2 class="col-span-full pt-2 font-serif italic  text-4xl lg:text-9xl leading-[28px] lg:leading-[36px] tracking-tight">
    {title}
  </h2>
  <div class="flex flex-col justify-between"> 
    <p class="-ml-px -my-1">{description}</p>
    <div class="flex flex-col self-end -my-1">
      {roles.map(role => <p class="capitalize">{role}</p>)}
    </div>
  </div>
  {link ? (
    <a
      href={link.href}
      target={link.target || '_self'} 
      class="col-span-3 group flex gap-1 justify-between items-center border-t sm:border-y border-white/[35%]  -mb-4 sm:mb-0"
    >
      <span class="group-hover:underline group-focus:underline">Live site</span>
      <UpRightArrowIcon classes='mt-px' />
    </a>
  ) : null}
  <div class={`
    flex justify-between items-center gap-1 border-y border-white/[35%] col-span-3
  `}>
    {isComingSoon ? (
      <p class="flex transition ease-in-out group-hover:rotate-1">
        Coming soonâ€¦
      </p>
    ) : (
      <a href={`/study/${slug}`} class="group flex justify-between gap-4 w-full">
        <span class="group-hover:underline group-focus:underline">Case study</span>
        <RightArrowIcon classes='mt-0.5' />
      </a>
    )}
  </div> -->
  
</a>

