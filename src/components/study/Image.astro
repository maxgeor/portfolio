---
import type { GridSpan, FullBleed } from '../../utils/class-generator'
import { generateGridSpanClasses, generateFullBleedClasses } from '../../utils/class-generator'
import clsx from 'clsx';

export interface Props {
  src: string;
  alt: string;
  span?: GridSpan;
  description?: string;
  hasCaption?: boolean;
  hasBorder?: boolean;
  orientation?: 'horizontal' | 'vertical';
  fullBleed?: FullBleed;
  classes?: string;
}

const { 
  src, 
  alt,
  span = 16,
  hasCaption = true,
  description = '',
  orientation = 'horizontal',
  fullBleed = false,
  hasBorder = false,

  classes = ""
} = Astro.props;

const gridClasses = generateGridSpanClasses(span);
const { bleedClasses, paddingClasses } = generateFullBleedClasses(fullBleed);
---
<div class={clsx(
  "text-neutral-800 dark:text-neutral-300 flex flex-col gap-10 h-fit",
  gridClasses,
  bleedClasses,
  classes
)}>
  <figure class={`
    image relative
    ${orientation === 'vertical' ? 'aspect-[2/3]' : 'aspect-[7/4]'}
  `}>
    <img
      src={src}
      alt={alt}
      class={`
        h-full w-full object-cover bg-neutral-200 dark:bg-[#212121]
        select-none self-center
        ${orientation === 'vertical' ? 'aspect-[2/3]' : 'aspect-[7/4]'}
      `}
    />
  </figure>
  <div class={clsx(
    hasCaption || description ? 'flex flex-col gap-10' : 'hidden',
    paddingClasses
  )}>
    {hasCaption && <p class="col-span-full">{alt}</p>}
    {description && <p class="col-span-full">{description}</p>}
  </div>
</div>