---
import RightArrowIcon from './icons/RightArrowIcon.astro';
import UpRightArrowIcon from './icons/UpRightArrowIcon.astro';

export interface Props {
  title: string;
  description: string;
  image: string;
  link: {
    href: string;
    target?: '_blank' | '_self';
  };
  isComingSoon?: boolean;
  classes?: string;
}

const { 
  link,
  title, 
  description, 
  image,
  classes = '',
  isComingSoon = false,
} = Astro.props;
---

<a
  href={isComingSoon ? '#' : link.href}
  target={!link.target || isComingSoon ? '_self' : link.target}
  class={`
    group relative gap-x-4 grid grid-cols-2 lg:grid-cols-4 h-fit break-inside-avoid-column col-span-full sm:col-span-2
    ${isComingSoon ? 'cursor-default' : 'cursor-pointer'} 
    ${classes} 
  `}
>
  <div class="flex transition-all duration-200 col-span-full mb-1 gap-x-2 items-start">
    <div class="flex flex-col md:flex-row md:items-center gap-x-1 flex-wrap w-full my-0.5 leading-4">
      <span class="whitespacs-nowrap">{title}</span> 
      <span class="text-neutral-400">
        {description.replace('.', '') || ''}
      </span>
    </div>
    {isComingSoon ? (
      <span class="text-neutral-400 whitespace-nowrap lg:opacity-0 group-hover:opacity-100 group-focus:opacity-100 transition ease-in-out">
        Coming soonâ€¦
      </span>
    ) : (
      <span 
        class="absolute top-0 right-0 opacity-0 group-hover:opacity-100 group-focus:opacity-100 transition ease-in-out "
      >
        {link.target === '_blank' ? (
          <UpRightArrowIcon 
            classes="transition ease-in-out mt-[3px] -mr-[3px] transform -translate-x-px translate-y-px group-hover:translate-x-px group-focus:translate-x-px group-hover:-translate-y-px group-focus:-translate-y-px" 
          /> 
        ) : (
          <RightArrowIcon 
            classes="transition ease-in-out -mr-0.5 transform -translate-x-0.5 group-hover:translate-x-0 group-focus:translate-x-0 " 
          />
        )}
      </span>
    )}
  </div>
  <picture class='order-last relative h-auto col-span-full group-hover:brightness-[95%] transition'>
    <img
      src={image}
      alt={`Preview mockup of ${title}`}
      class='w-full h-full object-top select-none object-contain'
    />
  </picture>
</a>
