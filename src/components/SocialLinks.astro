---
import CopyIcon from "./icons/CopyIcon.astro";
import CheckIcon from "./icons/CheckIcon.astro";
import UpRightArrowIcon from "./icons/UpRightArrowIcon.astro";

export interface Props {
  classes?: string;
}

const { classes = "" } = Astro.props;

const links = [
  {
    name: "CV",
    url: "/resume-max-georgopoulos.pdf",
  },
  {
    name: "Arena",
    url: "https://www.are.na/max-georgopoulos",
  },
  {
    name: "Layers",
    url: "https://layers.to/maxgeorgopoulos",
  },
  {
    name: "Github",
    url:  "https://github.com/maxgeor",
  },
  {
    name: "Twitter",
    url: "https://twitter.com/maxoulos",
  },
  {
    name: "Dribbble",
    url: "https://dribbble.com/maxgeo",
  },
  {
    name: "LinkedIn",
    url: "https://www.linkedin.com/in/max-georgopoulos-109095136/",
  },
];
---

<ul class={`flex flex-col ${classes}`}>
  {links.map(link => (
    <li>
      <a
        href={link.url}
        target="_blank"
        class="flex w-full items-center justify-between border-t  border-[#D2D2D2] hover:underline dark:border-neutral-700"
      >
        {link.name}
        <UpRightArrowIcon classes="mt-0.5 -mr-[3px]" />
      </a>
    </li>
  ))}
  <li>
    <button
      id="email"
      aria-label="Copy email"
      class="group relative flex w-full cursor-pointer items-center justify-between border-y border-[#D2D2D2] dark:border-neutral-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-4 ring-offset-neutral-800 rounded-sm"
    >
      <span class="flex gap-px group-hover:underline">
        max123358<code>@</code>gmail.com
      </span>
      <CopyIcon id="copy-icon" classes="absolute group-active:scale-90 right-0 transform -mr-[3px]" />
      <CheckIcon id="check-icon" classes="absolute right-0 transform opacity-0 text-green -mr-[2px]" />
    </button>
  </li>
</ul>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const email = document.querySelector("#email") as HTMLElement;

    email?.addEventListener("click", () => {
      navigator.clipboard.writeText(email.innerText);

      const copyIcon = document.querySelector("#copy-icon") as HTMLElement;
      const checkIcon = document.querySelector("#check-icon") as HTMLElement;

      copyIcon.classList.add("opacity-0");
      checkIcon.classList.remove("opacity-0");

      setTimeout(() => {
        copyIcon.classList.remove("opacity-0");
        checkIcon.classList.add("opacity-0");
      }, 3000);
    });
  });
</script>
