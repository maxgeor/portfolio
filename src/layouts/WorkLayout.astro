---
const { frontmatter } = Astro.props;
import Layout from "./Layout.astro";
const {
  type,
  title,
  description,
  roles,
  year,
  link,
  image,
  company,
  tools,
  collaborators,
  titleTightness = 'normal'
} = frontmatter;
---
<Layout title={title}>
  <div class="relative">
    <a 
      id="logo"
      href="/" 
      class="flex flex-col items-center justify-center md:fixed md:top-0 md:bottom-0 md:left-0 h-10 md:h-screen md:w-10 border-b-[0.5px] md:border-b-0 md:border-l-[0.5px] border-gray-darkest hover:bg-gray transition duration-100"
    >
      <span class="text-xl font-bodoni uppercase tracking-[0.02em]">MG</span>
    </a>
    <main class="px-5 md:px-10 md:ml-10 2.5xl:p-0 2.5xl:mx-auto 2.5xl:max-w-6xl">
      <nav class="flex items-baseline justify-between gap-x-5 w-full pt-5 pb-1">
        <div class="flex items-center gap-2.5 -my-1.5">
          <a href="/" class="hover:underline">Work</a>
          <span>/</span>
          <p class="opacity-40">{title}</p>
        </div>
        <span class="uppercase tracking-wider text-[10px] leading-4">Case Study</span>
      </nav>
      <div class="flex flex-col items-center gap-[140px] pt-[200px] md:pt-60">
        <section id="hero" class="relative grid grid-cols-12 gap-y-5 lg:gap-x-10  w-full">
          <div class="relative col-span-full lg:col-span-8 flex items-start justify-between gap-5 flex-wrap self-end ">
            <div class="flex flex-col gap-y-5">
              <h2 class={`
                ${titleTightness === 'tight' ? 'tracking-[-0.21em]' : null}
                col-span-full lg:col-span-8 uppercase tracking-[-0.063em] text-7xl lg:text-8xl -my-2 lg:-my-2.5 -ml-0.5
              `}>
                {title}
              </h2>
              <p class="col-span-full lg:col-span-8 -my-1">{description}</p>
            </div>
            {link ? (
              <a href={link} target="_blank" class="group lg:hidden order-last -my-1 p-4 -mt-[19px] -ml-3.5 -mb-4 -mr-4 w-fit">
                <span class="flex items-end gap-x-1 border-b-[0.1em] border-gray-darkest w-[16px] group-hover:rounded-[8px] group-focus:rounded-[8px] transition-all ease-in-out duration-100">
                  <span class={`
                    transform rotate-[160deg] transition ease-in-out duration-75 opacity-[80%]
                    group-hover:-translate-y-px group-focus:-translate-y-px group-active:-translate-y-px
                    group-hover:translate-x-px group-focus:translate-x-px group-active:translate-x-px
                    group-hover:scale-[107%] group-focus:scale-[107%] group-active:scale-[106%] 
                  `}>ðŸ‘€</span>
                </span>
              </a>
              // <a href={link} target="_blank" class="group flex lg:hidden items-center gap-0.5 flex-nowrap order-last -my-1">
              //   <span class="underline">See it</span>
              //   <svg class="mt-0.5" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.64645 11.3536C3.45118 11.1583 3.45118 10.8417 3.64645 10.6465L10.2929 4L6 4C5.72386 4 5.5 3.77614 5.5 3.5C5.5 3.22386 5.72386 3 6 3L11.5 3C11.6326 3 11.7598 3.05268 11.8536 3.14645C11.9473 3.24022 12 3.36739 12 3.5L12 9.00001C12 9.27615 11.7761 9.50001 11.5 9.50001C11.2239 9.50001 11 9.27615 11 9.00001V4.70711L4.35355 11.3536C4.15829 11.5488 3.84171 11.5488 3.64645 11.3536Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
              // </a>
            ) : null}
          </div>
          <div class="col-span-full lg:col-span-4 flex flex-col gap-y-5">
            <table class="flex flex-col w-full -my-1" cellspacing="0" cellpadding="0">
              <tr>
                <td class="pr-5"><p>Role</p></td>
                <td><p class="capitalize">{roles.join(', ')}</p></td>
              </tr>
              <tr>
                <td class="pr-5"><p>Year</p></td>
                <td><p>{year}</p></td>
              </tr>
              {tools ? (
                <tr>
                  <td class="pr-5"><p>Tools</p></td>
                  <td><p>{tools.join(', ')}</p></td>
                </tr>
              ) : null}
              {company ? (
                <tr>
                  <td class="pr-5"><p>Company</p></td>
                  <td><p>{company}</p></td>
                </tr>
              ) : null}
              {collaborators ? (
                <tr>
                  <td class="pr-5">Collaborators</td>
                  <td >
                    {collaborators.map(({ name, href, role }) => (
                      <span>
                        <a href={href} target="_blank" class="underline">{name}</a>
                        <span>({role})</span>
                      </span>
                    ))}
                  </td>
                </tr>
              ) : null}
            </table>
            {link ? (
              <a href={link} target="_blank" class="group hidden lg:inline-block order-last -my-1 p-4 -mt-4 -ml-3.5 -mb-4 -mr-4 w-fit">
                <span class="flex items-end gap-x-1 border-b-[0.1em] border-gray-darkest w-[18px] group-hover:rounded-[8px] group-focus:rounded-[8px] transition-all ease-in-out duration-100">
                  <span class={`
                    transform rotate-[160deg] transition ease-in-out duration-75 ml-px opacity-[80%] group-hover:opacity-100 group-focus:opacity-100
                    group-hover:-translate-y-px group-focus:-translate-y-px group-active:-translate-y-0
                    group-hover:translate-x-px group-focus:translate-x-px group-active:translate-x-0 
                    group-hover:scale-[107%] group-focus:scale-[107%] group-active:scale-[106%] 
                  `}>ðŸ‘€</span>
                </span>
              </a>
              // <a href={link} target="_blank" class="group hidden lg:flex gap-0.5 items-center flex-nowrap order-last -my-1">
              //   <span class="underline">See it</span>
              //   <svg class="mt-0.5" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.64645 11.3536C3.45118 11.1583 3.45118 10.8417 3.64645 10.6465L10.2929 4L6 4C5.72386 4 5.5 3.77614 5.5 3.5C5.5 3.22386 5.72386 3 6 3L11.5 3C11.6326 3 11.7598 3.05268 11.8536 3.14645C11.9473 3.24022 12 3.36739 12 3.5L12 9.00001C12 9.27615 11.7761 9.50001 11.5 9.50001C11.2239 9.50001 11 9.27615 11 9.00001V4.70711L4.35355 11.3536C4.15829 11.5488 3.84171 11.5488 3.64645 11.3536Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
              // </a>
            ) : null}
          </div>  
        </section>
        <article class="max-w-7xl w-full text-base lg:text-lg leading-5 lg:leading-6">
          <div class={`
            prose
            prose-headings:text-[#dcdcdc] prose-headings:font-normal prose-strong:text-[#fafafa] prose-a:text-[#fafafa]
            prose-h1:text-center
            prose:text-gray-light mx-auto
            prose-li:marker:text-neutral-400 prose-li:marker:text-opacity-50
            prose-p:text-gray-light prose-li:text-gray-light
            prose-h1:mb-10 prose-h1:my-16 prose-h1:first:mt-0
          `}>
            <slot />
          </div>
        </article>
      </div>
    </main>
  </div>
</Layout>

<style is:inline>
  @media (min-width: 768px) {
    #logo {
      writing-mode: vertical-rl; 
      transform: rotate(180deg);
    }
  }

  .full-width {
    width: 100vw;
    position: relative;
    left: 50%;
    right: 50%;
    margin-left: -50vw;
    margin-right: -50vw;
  }
</style>
